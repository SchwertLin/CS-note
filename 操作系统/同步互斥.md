# 同步互斥

[TOC]

## 线程的介绍(为什么需要同步互斥)

线程分为独立的线程以及合作的线程。

**独立的线程**：

- 不和其他线程共享资源或状态
- 具有确定性：输出状态决定了结果
- 具有可重现性：可以重现起始条件
- 调度的顺序不重要



**合作的线程**：

- 在多个线程中共享状态
- 具有不确定性
- 具有不可重现性（导致错误间歇发生）



**竞态条件**：系统缺陷导致结果依赖于并发执行或者事件的顺序/时间。

> 感觉有点类似硬件层面的抢占BUS总线

**如何避免竞态？**使用原子操作，这样只有I/O,没有中间态。



**为什么需要合作？**

- 资源共享
- 并发提高系统效率
- 分解工作模块化



## 一些概念







## 忙等待

### 临界区





## 信号量







![](https://s3.bmp.ovh/imgs/2022/05/18/492db7b8145dee9e.png)



## 管程

![](https://s3.bmp.ovh/imgs/2022/05/18/73bc77a5cba56a17.png)

![](https://s3.bmp.ovh/imgs/2022/05/18/605ebb39d9d430d1.png)

